{"version":3,"names":[],"mappings":"","sources":["gamedetails.js"],"sourcesContent":["\"use strict\";\n\nfunction importGamePreview(gameId, date) {\n  console.log('Import ' + date + ' - ' + gameId);\n  var preview = document.getElementById(\"import-preview\");\n  importGameData(gameId, date, function (gameData) {\n    console.log(gameData);\n    var gameInfo = gameData.gameInfo;\n    var date;\n    var players = gameData.players;\n    var actions = gameData.actions;\n    preview.innerHTML = '';\n    preview.innerHTML += '<h4>' + gameInfo.league + '</h4>\\n';\n    preview.innerHTML += '<p>' + gameInfo.gameId + '</p>\\n';\n    preview.innerHTML += '<p>' + gameInfo.teamHome + ' - ' + gameInfo.teamAway + ' | ' + gameInfo.result + '</p>\\n';\n    preview.innerHTML += '<p>' + gameInfo.date + ' ' + gameInfo.gym + '</p>\\n';\n    preview.innerHTML += '<h4>Spieler</h4>\\n';\n    var playerTable = '<table class=\"players\">\\n';\n    playerTable += '<tr><th>Name</th><th>#</th><th></th><th>Tore</th><th>7m</th></tr>\\n';\n\n    for (var prop in players) {\n      var player = players[prop];\n      playerTable += '<tr>\\n';\n      playerTable += '<td>' + player.playerName + '</td>\\n';\n      playerTable += '<td>' + player.number + '</td>\\n';\n      playerTable += '<td>';\n      if (player.goalie) playerTable += 'TW';\n      playerTable += '</td>\\n';\n      playerTable += '<td>' + player.goals + '</td>\\n';\n      playerTable += '<td>';\n\n      if (player.penalty > 0) {\n        playerTable += player.penalty + '/' + 1 * player.penaltyGoals;\n      }\n\n      playerTable += '</td>\\n'; // playerTable += '<td>'+player.+'</td>\\n';\n\n      playerTable += '</tr>\\n'; // console.log(player);\n    }\n\n    playerTable += '</table>\\n\\n';\n    preview.innerHTML += playerTable;\n    preview.innerHTML += '<h4>Spielverlauf</h4>\\n';\n    var actionTable = '<table class=\"actions\">\\n';\n    actions.forEach(function (action) {\n      actionTable += '<tr>\\n';\n      actionTable += '<td>' + action.scoreHome + ':' + action.scoreAway + '</td>\\n';\n      actionTable += '<td>' + action.text + '</td>\\n';\n      actionTable += '<td>';\n      if (action.playerName != null) actionTable += action.playerName;\n      actionTable += '</td>\\n';\n      actionTable += '<td>';\n      if (action.category != '') actionTable += action.category;\n      actionTable += '</td>\\n'; // actionTable += '<td>'+action.+'</td>\\n';\n\n      actionTable += '</tr>\\n'; // console.log(player);\n    });\n    actionTable += '</table>\\n\\n';\n    preview.innerHTML += actionTable;\n    var button = document.getElementById(\"import-confirm-btn\");\n    button.addEventListener('click', function () {\n      saveGameBtn(gameInfo.gameId, gameInfo.dateUni);\n    }, false); // console.log(button);\n  });\n}\n\nfunction importGameData(gameId, date, callback) {\n  // console.log('Loading ' + gameId);\n  var url = 'index.php?option=com_hbmanager&task=previewGameData&format=raw';\n  var httpRequest = new XMLHttpRequest();\n\n  if (!httpRequest) {\n    alert('Giving up :( Cannot create an XMLHTTP instance');\n    return false;\n  }\n\n  httpRequest.onreadystatechange = function () {\n    try {\n      if (httpRequest.readyState === XMLHttpRequest.DONE) {\n        // console.log(httpRequest.status);\n        if (httpRequest.status === 200) {\n          // console.log(httpRequest.responseText);\n          var response = JSON.parse(httpRequest.responseText);\n          console.log(response);\n          callback(response);\n        } else {\n          console.log('There was a problem with the request.');\n        }\n      }\n    } catch (e) {\n      // alert('Caught Exception: ' + e.description);\n      console.log('Caught Exception: ' + e.description);\n    }\n  };\n\n  httpRequest.open('POST', url);\n  httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n  httpRequest.send('gameId=' + encodeURIComponent(gameId) + '&date=' + encodeURIComponent(date));\n}\n\nfunction saveGameBtn(gameId, date) {\n  console.log('Save ' + gameId + ' - ' + date);\n  var row = document.getElementById(\"gameId_\" + gameId);\n  saveGameData(gameId, date, function (response) {\n    // console.log(response);\n    row.classList.add(\"hidden\");\n  });\n}\n\nfunction saveGameData(gameId, date, callback) {\n  console.log('Loading ' + gameId);\n  var url = 'index.php?option=com_hbmanager&task=importGameData&format=raw';\n  var httpRequest = new XMLHttpRequest();\n\n  if (!httpRequest) {\n    alert('Giving up :( Cannot create an XMLHTTP instance');\n    return false;\n  }\n\n  httpRequest.onreadystatechange = function () {\n    try {\n      if (httpRequest.readyState === XMLHttpRequest.DONE) {\n        // console.log(httpRequest.status);\n        if (httpRequest.status === 200) {\n          // console.log(httpRequest.responseText);\n          var response = JSON.parse(httpRequest.responseText); // console.log(response);\n\n          callback(response);\n        } else {\n          console.log('There was a problem with the request.');\n        }\n      }\n    } catch (e) {\n      // alert('Caught Exception: ' + e.description);\n      console.log('Caught Exception: ' + e.description);\n    }\n  };\n\n  httpRequest.open('POST', url);\n  httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n  httpRequest.send('gameId=' + encodeURIComponent(gameId) + '&date=' + encodeURIComponent(date));\n}\n\nfunction showAllGames() {\n  var list = document.getElementById(\"importGamesList\");\n  var rows = Array.from(list.getElementsByTagName(\"tr\")); // console.log(rows);\n\n  rows.forEach(function (element) {\n    console.log(element);\n    element.classList.remove(\"hidden\");\n  });\n}"],"file":"gamedetails.js"}